# ==================== デフォルト設定 ====================
# すべての環境で共通の設定
default: &default
  # adapter: 使用するデータベースの種類（PostgreSQL）
  adapter: postgresql
  # encoding: 文字エンコーディング（UTF-8）
  encoding: unicode
  # pool: コネクションプールのサイズ（同時接続数）
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  # url: 環境変数 DATABASE_URL から接続情報を取得
  # Renderなどの本番環境では、この環境変数に完全な接続URLが設定される
  url: <%= ENV['DATABASE_URL'] %>

# ==================== 開発環境 ====================
development:
  <<: *default
  # DATABASE_URL が設定されていない場合のフォールバック
  # Docker環境では DATABASE_URL が設定されているため、以下は使われない
  database: habitflow_development
  # username と host は DATABASE_URL が優先されるため、コメントアウト
  # username: postgres
  # password: postgres
  # host: db

# ==================== テスト環境 ====================
test:
  <<: *default
  database: habitflow_test

# ==================== 本番環境 ====================
production:
  <<: *default
  # 本番環境では DATABASE_URL 環境変数のみを使用
  # Renderが自動的に設定するため、個別の設定は不要（url: が優先されます）
