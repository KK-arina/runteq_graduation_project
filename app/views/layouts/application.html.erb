<!DOCTYPE html>
<html>
  <head>
    <!-- ========================================================= -->
    <!-- ページタイトル（ブラウザのタブに表示される） -->
    <!-- ========================================================= -->
    <title>HabitFlow</title>

    <!-- ========================================================= -->
    <!-- ビューポート設定（レスポンシブ対応に必須） -->
    <!-- ========================================================= -->
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!--
      width=device-width  → デバイス幅に合わせる
      initial-scale=1     → 初期ズーム倍率を1倍にする

      これが無いとスマホで崩れます。
    -->

    <!-- ========================================================= -->
    <!-- セキュリティ対策 -->
    <!-- ========================================================= -->
    <%= csrf_meta_tags %>
    <!-- CSRF攻撃対策（フォームの正当性チェック） -->

    <%= csp_meta_tag %>
    <!-- XSS対策（読み込めるスクリプトを制限） -->

    <!-- ========================================================= -->
    <!-- CSS読み込み -->
    <!-- ========================================================= -->
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <!-- Tailwind CSS -->

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <!-- 独自CSS（必要があれば使用） -->
  </head>

  <!-- ========================================================= -->
  <!-- body全体レイアウト -->
  <!-- ========================================================= -->
  <body class="min-h-screen flex flex-col bg-white text-gray-900">
    <!--
      min-h-screen → 画面高さ100%
      flex flex-col → 縦並びレイアウト
      bg-white → 背景白
      text-gray-900 → 基本文字色
    -->

    <!-- ========================================================= -->
    <!-- 共通ヘッダー -->
    <!-- ========================================================= -->
    <%= render "shared/header" %>

    <!-- ========================================================= -->
    <!-- メインコンテンツ -->
    <!-- ========================================================= -->
    <main class="flex-1">
      <!-- flex-1 によりフッターを最下部へ押し出す -->

      <!-- ================= フラッシュメッセージ ================= -->
      <% flash.each do |type, message| %>
        <div class="max-w-4xl mx-auto mt-4 px-4">
          <div class="<%= type == 'notice' ? 
                        'bg-green-100 text-green-700 border-green-400' : 
                        'bg-red-100 text-red-700 border-red-400' %> 
                      border px-4 py-3 rounded">

            <%= message %>
          </div>
        </div>
      <% end %>

      <!-- ================= 各ページの内容 ================= -->
      <%= yield %>
    </main>

    <!-- ========================================================= -->
    <!-- 共通フッター -->
    <!-- ========================================================= -->
    <%= render "shared/footer" %>

  </body>
</html>