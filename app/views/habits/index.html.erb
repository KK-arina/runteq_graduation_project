<!-- app/views/habits/index.html.erb -->

<!-- ページタイトル -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- flex: フレックスボックスレイアウト -->
  <!-- justify-between: 左右に要素を配置 -->
  <!-- items-center: 垂直方向に中央揃え -->
  <!-- mb-6: 下マージン24px -->
  <div class="flex justify-between items-center mb-6">
    <!-- text-3xl: フォントサイズ30px -->
    <!-- font-bold: 太字 -->
    <!-- text-gray-900: ダークグレー -->
    <h1 class="text-3xl font-bold text-gray-900">
      習慣管理
    </h1>

    <!-- 新しい習慣を追加ボタン -->
    <%= link_to new_habit_path, 
        class: "px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors" do %>
      + 新しい習慣を追加
    <% end %>
  </div>

  <!-- 習慣が存在する場合 -->
  <% if @habits.any? %>
    <!-- grid: グリッドレイアウト -->
    <!-- grid-cols-1: モバイルは1列 -->
    <!-- md:grid-cols-2: タブレット（768px以上）は2列 -->
    <!-- lg:grid-cols-3: PC（1024px以上）は3列 -->
    <!-- gap-6: グリッド間隔24px -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @habits.each do |habit| %>
        <!-- bg-white: 白背景 -->
        <!-- rounded-xl: 角丸12px -->
        <!-- shadow-sm: 軽い影 -->
        <!-- hover:shadow-md: ホバー時に影を濃く -->
        <!-- transition: トランジション効果 -->
        <!-- p-6: 内側余白24px -->
        <!-- border: 1pxボーダー -->
        <!-- border-gray-200: ライトグレーのボーダー -->
        <div class="bg-white rounded-xl shadow-sm hover:shadow-md transition p-6 border border-gray-200">
          <!-- カードヘッダー（習慣名と削除ボタン） -->
          <div class="flex justify-between items-start mb-4">
            <!-- 習慣名エリア -->
            <div class="flex-1">
              <!-- text-xl: フォントサイズ20px -->
              <!-- font-bold: 太字 -->
              <!-- text-gray-900: ダークグレー -->
              <!-- mb-2: 下マージン8px -->
              <h2 class="text-xl font-bold text-gray-900 mb-2">
                <%= habit.name %>
              </h2>
            </div>

            <!-- 削除ボタン -->
            <!-- button_to: フォーム送信ボタン（DELETEリクエスト） -->
            <!-- method: :delete で DELETE /habits/:id にリクエスト -->
            <!-- data: { turbo_confirm: "..." } で削除前に確認ダイアログを表示 -->
            <!-- class: スタイリング（赤色、ホバー時に濃く） -->
            <%= button_to habit_path(habit), 
                method: :delete,
                data: { turbo_confirm: "本当に削除しますか？\n「#{habit.name}」を削除すると、過去の記録も表示されなくなります。" },
                class: "px-3 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors" do %>
              削除
            <% end %>
          </div>

          <!-- カード本体（習慣の詳細情報） -->
          <div class="space-y-3">
            <!-- チェック型アイコン -->
            <div class="flex items-center text-sm text-blue-500">
              <!-- SVG: チェックマークアイコン -->
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              チェック型
            </div>

            <!-- 週次目標値 -->
            <div class="flex items-center text-sm text-green-500">
              <!-- SVG: ターゲットアイコン -->
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              週 <%= habit.weekly_target %> 回
            </div>

            <!-- 今週の進捗（仮データ: 50%固定） -->
            <div class="mt-4">
              <!-- プログレスバーのラベル -->
              <div class="flex justify-between text-sm mb-2">
                <span class="text-gray-600">今週の進捗</span>
                <!-- font-bold: 太字 -->
                <!-- text-blue-600: 青色 -->
                <span class="font-bold text-blue-600">50%</span>
              </div>

              <!-- プログレスバー -->
              <!-- w-full: 幅100% -->
              <!-- bg-gray-200: 背景色ライトグレー -->
              <!-- rounded-full: 完全な角丸 -->
              <!-- h-2: 高さ8px -->
              <!-- overflow-hidden: はみ出しを隠す -->
              <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                <!-- bg-blue-500: 青色 -->
                <!-- h-full: 高さ100% -->
                <!-- rounded-full: 完全な角丸 -->
                <!-- transition-all: すべてのプロパティにトランジション -->
                <!-- duration-300: アニメーション時間300ms -->
                <div class="bg-blue-500 h-full rounded-full transition-all duration-300" style="width: 50%"></div>
              </div>

              <!-- 実績表示（仮データ） -->
              <div class="text-xs text-gray-400 mt-1">
                3 / <%= habit.weekly_target %> 日
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

  <!-- 習慣が存在しない場合（Empty State） -->
  <% else %>
    <!-- text-center: テキスト中央揃え -->
    <!-- py-12: 上下パディング48px -->
    <div class="text-center py-12">
      <!-- bg-gray-50: 薄いグレー背景 -->
      <!-- border-2: 2pxボーダー -->
      <!-- border-dashed: 破線ボーダー -->
      <!-- border-gray-300: グレーのボーダー -->
      <!-- rounded-lg: 角丸8px -->
      <!-- p-12: 内側余白48px -->
      <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-12">
        <!-- 円形アイコン -->
        <!-- w-16: 幅64px -->
        <!-- h-16: 高さ64px -->
        <!-- mx-auto: 左右マージン自動（中央揃え） -->
        <!-- mb-4: 下マージン16px -->
        <!-- bg-blue-100: 薄い青背景 -->
        <!-- rounded-full: 完全な円形 -->
        <!-- flex: フレックスボックス -->
        <!-- items-center: 垂直方向中央揃え -->
        <!-- justify-center: 水平方向中央揃え -->
        <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
          <!-- SVG: プラスアイコン -->
          <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
        </div>

        <!-- メッセージ -->
        <p class="text-gray-600 mb-6">
          まだ習慣が登録されていません
        </p>

        <!-- 習慣登録ボタン -->
        <%= link_to new_habit_path, 
            class: "inline-block px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors" do %>
          習慣を登録する
        <% end %>
      </div>
    </div>
  <% end %>
</div>